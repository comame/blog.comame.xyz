{"pageProps":{"entry":{"entry":"wsl2-publish-server","title":"WSL2 のサーバをネットワークに公開する","date":"2020-03-26","tags":["Windows","server"],"type":"md"},"text":"<p>Hyper-V の NAT をこねくり回そうとしたけれども、うまくいかなかった。<code>netsh</code> コマンドを使うことで、簡単にポート変換ができる。</p>\n<h2>Workaround</h2>\n<p><a href=https://github.com/microsoft/WSL/issues/4150#issuecomment-504209723 target='_blank' rel='noopener'>Issue #4150 microsoft/WSL | GitHub</a></p>\n<pre>\n<code># PowerShell (Administrator)</code>\n<code></code>\n<code>> netsh interface portproxy add v4tov4 \\</code>\n<code>    listenport=<External Port> \\</code>\n<code>    listenaddress=<External Address> \\</code>\n<code>    connectport=<Internal Port> \\</code>\n<code>    connectaddress=<Internal Address></code>\n</pre><h3>connectaddress</h3>\n<p>WSL2 に割り当てられた内部 IP を指定する必要がある。WSL2 内で</p>\n<pre>\n<code># bash (WSL2)</code>\n<code></code>\n<code>$ ifconfig eth0 | grep inet</code>\n</pre><p>を叩くと取得できる。</p>\n<h2>Netsh interface portproxy</h2>\n<p><a href=https://docs.microsoft.com/ja-jp/windows-server/networking/technologies/netsh/netsh-interface-portproxy target='_blank' rel='noopener'>Netsh interface portproxy コマンド | Microsoft Docs</a></p>\n"},"__N_SSG":true}