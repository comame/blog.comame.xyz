<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Windows で動くおうちサーバにアクセスできなかった問題 | blog.comame.xyz</title><meta property="og:type" content="article"/><meta property="og:url" content="https://blog.comame.xyz/entries/2020-05-17/cannot-connect-house-server.md"/><meta property="og:title" content="Windows で動くおうちサーバにアクセスできなかった問題 | blog.comame.xyz"/><meta property="og:site_name" content="blog.comame.xyz"/><meta property="og:description" content=""/><meta name="description" content=""/><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/75b3a985ae8df8a5857d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/75b3a985ae8df8a5857d.css"/><link rel="preload" href="/_next/static/css/7e552a05a23ef38b9280.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7e552a05a23ef38b9280.css"/><link rel="preload" href="/_next/static/chunks/main-f01cf1dcca173d7f43b1.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-ccf5ab034a524403276a.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.ea5d6f7a7099b14097ba.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.136473f176143783e714.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-7826aa35c5692e1bca69.js" as="script"/><link rel="preload" href="/_next/static/chunks/44192d0b83adb4471c56c08528820b1f17270e33.228b4631e982fe3bd0c5.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/entries/%5Bdate%5D/%5Bid%5D-ddd608bb2bf2fc9bc89e.js" as="script"/></head><body><div id="__next"><header class="header_header__10AWY"><a href="/">blog.comame.xyz</a></header><div class="post"><div class="metadata_metadata__3aUvp"><h1 id="title">Windows で動くおうちサーバにアクセスできなかった問題</h1><time id="time">2020-05-17</time><ul class="tag-list_tag-list__1Wf57"><li><a href="/tags/server.html">server</a></li><li><a href="/tags/troubleshoot.html">troubleshoot</a></li></ul></div><div class="content_content__3lhGG"><h2>端的に</h2>
<ul>
<li>「プライベート」ネットワークとして接続する</li>
<li>ファイアウォールを確認する</li>
</ul>
<h2>環境</h2>
<h3>ネットワーク</h3>
<pre>
<code>+--------------------+</code>
<code>|       Router       |</code>
<code>|   192.168.0.1/24   |</code>
<code>+--------------------+</code>
<code>           |</code>
<code>           |---------------------------|</code>
<code>           |                           |</code>
<code>+--------------------+      +--------------------+</code>
<code>|       Windows      |      |       Android      |</code>
<code>|     192.168.0.2    |      |     192.168.0.3    |</code>
<code>+--------------------+      +--------------------+</code>
</pre><h3>HTTP サーバ</h3>
<p>Windows で 8080 番ポートで待ち受け。</p>
<h2>発生した問題</h2>
<p>Windows マシンで動かしているサーバに、自宅内の他の端末からアクセスできなかった</p>
<ul>
<li>Windows から <code>curl http://localhost:8080</code> は問題なし</li>
<li>Windows から <code>curl http://192.168.0.2:8080</code> は問題なし</li>
<li>Android から Chrome で <a href=http://192.168.0.2:8080 target='_blank' rel='noopener'>http://192.168.0.2:8080</a> を開こうとすると<code>ERR_CONNECTION_REFUSED</code></li>
</ul>
<h2>原因と対処</h2>
<h3>Windows ファイアウォール</h3>
<p>8080 番ポートへのアクセスが許可されていなかった。「受信の規則」に「TCP 8080番ポート」のアクセス許可を追加した。自宅のネットワークからのみアクセスできるようにするため、リモートアドレスは 192.168.0.1/24 のみとした。</p>
<h3>ネットワーク プロフィール</h3>
<p>ネットワークプロフィールが「パブリック」になっていた。Wi-Fi 設定から「プライベート」に変更した。</p>
</div><div class="share_share__2h1cH"><img alt="共有" src="/icons/share.svg"/><a rel="noopener" target="_blank" title="Twitter で共有" href="https://twitter.com/intent/tweet?text=Windows%20%E3%81%A7%E5%8B%95%E3%81%8F%E3%81%8A%E3%81%86%E3%81%A1%E3%82%B5%E3%83%BC%E3%83%90%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E5%95%8F%E9%A1%8C%0a&amp;url=https%3A%2F%2Fblog.comame.xyz%2Fentries%2F2020-05-17%2Fcannot-connect-house-server.html&amp;related=comameito"><img alt="Twitter で共有" src="/icons/twitter_logo.svg"/></a><a rel="noopener" target="_blank" title="Facebook で共有" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.comame.xyz%2Fentries%2F2020-05-17%2Fcannot-connect-house-server.html"><img alt="Facebook で共有" src="/icons/facebook_logo.svg"/></a><a title="URL をコピー" id="url-copy"><img alt="URL をコピー" src="/icons/link.svg"/></a><script async="" src="/js/url-copy.js"></script></div></div><footer class="footer_footer__cDy4s"><small><a href="https://github.com/comame/blog.comame.xyz" target="_blank" rel="noopener"><img alt="GitHub Actions build status" id="build-status" src="https://github.com/comame/blog.comame.xyz/workflows/Build/badge.svg?event=push"/></a></small><small><span>Copyright 2020 <a href="https://comame.xyz">comame</a></span><span><a target="_blank" rel="noopener" href="https://github.com/comame/blog.comame.xyz/blob/master/archives/2020/cannot-connect-house-server.md">source</a></span><span><a target="_blank" rel="noopener" href="https://github.com/comame/blog.comame.xyz/commits/master/archives/2020/cannot-connect-house-server.md">history</a></span><span><a href="/feed.xml">Feed</a></span></small></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"entry":{"entry":"cannot-connect-house-server","title":"Windows で動くおうちサーバにアクセスできなかった問題","date":"2020-05-17","tags":["server","troubleshoot"],"type":"md"},"text":"\u003ch2\u003e端的に\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e「プライベート」ネットワークとして接続する\u003c/li\u003e\n\u003cli\u003eファイアウォールを確認する\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e環境\u003c/h2\u003e\n\u003ch3\u003eネットワーク\u003c/h3\u003e\n\u003cpre\u003e\n\u003ccode\u003e+--------------------+\u003c/code\u003e\n\u003ccode\u003e|       Router       |\u003c/code\u003e\n\u003ccode\u003e|   192.168.0.1/24   |\u003c/code\u003e\n\u003ccode\u003e+--------------------+\u003c/code\u003e\n\u003ccode\u003e           |\u003c/code\u003e\n\u003ccode\u003e           |---------------------------|\u003c/code\u003e\n\u003ccode\u003e           |                           |\u003c/code\u003e\n\u003ccode\u003e+--------------------+      +--------------------+\u003c/code\u003e\n\u003ccode\u003e|       Windows      |      |       Android      |\u003c/code\u003e\n\u003ccode\u003e|     192.168.0.2    |      |     192.168.0.3    |\u003c/code\u003e\n\u003ccode\u003e+--------------------+      +--------------------+\u003c/code\u003e\n\u003c/pre\u003e\u003ch3\u003eHTTP サーバ\u003c/h3\u003e\n\u003cp\u003eWindows で 8080 番ポートで待ち受け。\u003c/p\u003e\n\u003ch2\u003e発生した問題\u003c/h2\u003e\n\u003cp\u003eWindows マシンで動かしているサーバに、自宅内の他の端末からアクセスできなかった\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWindows から \u003ccode\u003ecurl http://localhost:8080\u003c/code\u003e は問題なし\u003c/li\u003e\n\u003cli\u003eWindows から \u003ccode\u003ecurl http://192.168.0.2:8080\u003c/code\u003e は問題なし\u003c/li\u003e\n\u003cli\u003eAndroid から Chrome で \u003ca href=http://192.168.0.2:8080 target='_blank' rel='noopener'\u003ehttp://192.168.0.2:8080\u003c/a\u003e を開こうとすると\u003ccode\u003eERR_CONNECTION_REFUSED\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e原因と対処\u003c/h2\u003e\n\u003ch3\u003eWindows ファイアウォール\u003c/h3\u003e\n\u003cp\u003e8080 番ポートへのアクセスが許可されていなかった。「受信の規則」に「TCP 8080番ポート」のアクセス許可を追加した。自宅のネットワークからのみアクセスできるようにするため、リモートアドレスは 192.168.0.1/24 のみとした。\u003c/p\u003e\n\u003ch3\u003eネットワーク プロフィール\u003c/h3\u003e\n\u003cp\u003eネットワークプロフィールが「パブリック」になっていた。Wi-Fi 設定から「プライベート」に変更した。\u003c/p\u003e\n"},"__N_SSG":true},"page":"/entries/[date]/[id]","query":{"date":"2020-05-17","id":"cannot-connect-house-server"},"buildId":"rddQuo77vSmkKOsPP-zxE","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-e750b8bf0c81a657f011.js"></script><script src="/_next/static/chunks/main-f01cf1dcca173d7f43b1.js" async=""></script><script src="/_next/static/chunks/webpack-ccf5ab034a524403276a.js" async=""></script><script src="/_next/static/chunks/framework.ea5d6f7a7099b14097ba.js" async=""></script><script src="/_next/static/chunks/commons.136473f176143783e714.js" async=""></script><script src="/_next/static/chunks/pages/_app-7826aa35c5692e1bca69.js" async=""></script><script src="/_next/static/chunks/44192d0b83adb4471c56c08528820b1f17270e33.228b4631e982fe3bd0c5.js" async=""></script><script src="/_next/static/chunks/pages/entries/%5Bdate%5D/%5Bid%5D-ddd608bb2bf2fc9bc89e.js" async=""></script><script src="/_next/static/rddQuo77vSmkKOsPP-zxE/_buildManifest.js" async=""></script><script src="/_next/static/rddQuo77vSmkKOsPP-zxE/_ssgManifest.js" async=""></script></body></html>